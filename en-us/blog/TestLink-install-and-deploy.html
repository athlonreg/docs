<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="TestLink" />
	<meta name="description" content="TestLink安装部署" />
	<!-- 网页标签标题 -->
	<title>TestLink安装部署</title>
	<link rel="shortcut icon" href="/img/docsite.ico"/>
	<link rel="stylesheet" href="/build/blogDetail.css" />
</head>
<body>
	<div id="root"><div class="blog-detail-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/en-us/index.html"><img class="logo" src="/img/dubbo_colorful.png"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">中</span><div class="header-menu"><img class="header-menu-toggle" src="/img/system/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="/en-us/index.html" target="_self">HOME</a></li><li class="menu-item menu-item-normal"><a href="/en-us/docs/CAS-5-3-4-install-and-deploy" target="_self">DOCS</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/en-us/blog/index.html" target="_self">BLOG</a></li><li class="menu-item menu-item-normal"><a href="/en-us/community/index.html" target="_self">COMMUNITY</a></li></ul></div></div></header><section class="blog-content markdown-body"><h1><center>TestLink安装部署</center></h1>
<h2>安装MySQL</h2>
<p>MySQL的Server在CentOS 7上从默认软件列表中被移除了，用MariaDB来代替，所以这导致我们必须要去官网上进行下载，找到链接，用wget打开，然后再安装：</p>
<pre><code class="language-bash"><span class="hljs-comment"># wget http://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm</span>
<span class="hljs-comment"># rpm -ivh mysql57-community-release-el7-9.noarch.rpm</span>
<span class="hljs-comment"># yum -y install mysql mysql-server mysql-devel</span>
</code></pre>
<p>启动MySQL服务</p>
<pre><code class="language-bash"><span class="hljs-comment"># systemctl start mysqld</span>
</code></pre>
<p>获取安装MySQL时的初始密码并登录MySQL</p>
<pre><code class="language-bash"><span class="hljs-comment"># grep 'temporary password' /var/log/mysqld.log</span>
<span class="hljs-comment"># mysql -u root -p</span>
</code></pre>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/4a/a001ae2bae5a494c7329cd78a477a3.jpg" alt=""></p>
<p>登录成功后修改密码，首先修改安全策略为0，然后将密码长度限制修改为1，最后修改密码</p>
<pre><code class="language-mysql">mysql&gt; set global validate_password_policy=0;
mysql&gt; set global validate_password_length=1;
mysql&gt; set password for root@localhost=password('root');
</code></pre>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/a2/0f74ed53f3a426d1fe005228478d8f.jpg" alt=""></p>
<p>创建testlink用户并创建testlink要用的数据库并把testlink数据库的所有权限赋给testlink用户</p>
<pre><code class="language-mysql">mysql&gt; CREATE USER 'testlink'@'%' IDENTIFIED BY 'root';
mysql&gt; CREATE DATABASE testlink; 
mysql&gt; GRANT ALL ON testlink.* TO 'testlink'@'%'; 
mysql&gt; flush privileges;
</code></pre>
<p>设置MySQL启动与自启动</p>
<pre><code class="language-bash"><span class="hljs-comment"># systemctl enable mysqld    //自启动</span>
<span class="hljs-comment"># systemctl start mysqld     //启动</span>
</code></pre>
<h2>安装httpd</h2>
<h3>安装</h3>
<pre><code class="language-bash"><span class="hljs-comment"># yum -y install httpd</span>
</code></pre>
<h3>启动自启动</h3>
<pre><code class="language-bash"><span class="hljs-comment"># systemctl enable httpd  //自启动</span>
<span class="hljs-comment"># systemctl start httpd   //启动</span>
</code></pre>
<h2>安装PHP</h2>
<pre><code class="language-bash"><span class="hljs-comment"># rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span>
<span class="hljs-comment"># rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</span>
<span class="hljs-comment"># yum -y install `yum search php | grep php56w | grep -v "===" | grep -v mysqlnd | awk -F '.' '{print $1}'`</span>
</code></pre>
<h3>测试一下PHP环境</h3>
<p>写一个phpinfo测试php环境是否正常</p>
<pre><code class="language-bash"><span class="hljs-comment"># vim /var/www/html/info.php</span>
</code></pre>
<pre><code class="language-php"><span class="hljs-meta">&lt;?php</span>
    phpinfo();
<span class="hljs-meta">?&gt;</span>
</code></pre>
<p>浏览器打开<code>http://IP:httpd端口/info.php</code></p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/bf/a51c4fe3482af30d3b54a102c5a844.jpg" alt=""></p>
<p>如图，PHP环境安装完成。</p>
<p>**Note: **
PHP无法正确解析，网页显示源码的解决方法：</p>
<pre><code class="language-bash">$ vi /etc/php.ini 
</code></pre>
<p>将short_open_tag = Off修改为short_open_tag = On，然后重启httpd服务即可</p>
<h2>安装TestLink</h2>
<h3>下载</h3>
<pre><code class="language-bash"><span class="hljs-comment"># wget https://jaist.dl.sourceforge.net/project/testlink/TestLink%201.9/TestLink%201.9.18/testlink-1.9.18.tar.gz</span>
</code></pre>
<h3>解压重命名</h3>
<pre><code class="language-bash"><span class="hljs-comment"># tar zxvf testlink-1.9.18.tar.gz</span>
<span class="hljs-comment"># mv testlink-1.9.18 testlink</span>
<span class="hljs-comment"># mv testlink /var/www/html/</span>
<span class="hljs-comment"># chown -R apache:apache /var/www/html/testlink</span>
</code></pre>
<h3>修改配置文件</h3>
<pre><code class="language-bash"><span class="hljs-comment"># sed -i -e "s/AllowOverride None/AllowOverride All/g" /etc/httpd/conf/httpd.conf</span>
<span class="hljs-comment"># sed -i -e "s/DirectoryIndex index.html/DirectoryIndex index.html index.php index.shtm/g" /etc/httpd/conf/httpd.conf</span>
<span class="hljs-comment"># sed -i -e "s/session.gc_maxlifetime = 1440/session.gc_maxlifetime = 2400/g" /etc/php.ini</span>
<span class="hljs-comment"># sed -i -e "s/max_execution_time = 30/max_execution_time = 120/g" /etc/php.ini</span>
<span class="hljs-comment"># service httpd restart</span>
</code></pre>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/49/3c7f4c9291a6c276e5dad2200d5571.jpg" alt=""></p>
<h3>新建一些PHP环境要求必备的文件夹并赋予适当权限</h3>
<pre><code class="language-bash"><span class="hljs-comment"># mkdir -p /var/www/html/testlink/gui/templates_c</span>
<span class="hljs-comment"># mkdir -p /var/testlink/logs/</span>
<span class="hljs-comment"># mkdir -p /var/testlink/upload_area/</span>
<span class="hljs-comment"># chmod 777 /var/www/html/testlink/gui/templates_c</span>
<span class="hljs-comment"># chmod 777 /var/testlink/logs/</span>
<span class="hljs-comment"># chmod 777 /var/testlink/upload_area/</span>
</code></pre>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/23/c132221e0b416226f6f7df1e63b12c.jpg" alt=""></p>
<h3>安装</h3>
<p>浏览器打开<code>http://IP:port/testlink/install</code>(将IP换成自己主机IP，端口号换为自己主机的Apache服务端口号)。如图，点击New installation开始安装</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/14/da839143e11bec790a2a77f7247529.jpg" alt=""></p>
<p>选中同意协议，continue</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/7c/b33fa4f939e6447fa43f36b5577b43.jpg" alt=""></p>
<p>进入系统环境检测阶段，这一步需要根据错误提示进行配置，前面已经在安装php和testlink时解决了，所以现在已经没有错误了，图中橙色的提示可以忽略，点击continue</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/8c/84dad1406d9a22e95913b060326730.jpg" alt=""></p>
<p>如图，设定数据库管理员登录账户密码，自定义TestLink的数据库登录账户密码，其余均保持默认，点击Process TestLink Setup</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/58/736d782618beafcda69918ffca7749.jpg" alt=""></p>
<h2>登录</h2>
<p>安装完成网址输入http://IP/testlink即可自动跳转到登录页面，默认用户admin/admin</p>
</section><footer class="footer-container"><div class="footer-body"><img src="/img/dubbo_gray.png"/><div class="cols-container"><div class="col col-12"><h3>Disclaimer</h3><p>the disclaimer content</p></div><div class="col col-6"><dl><dt>Documentation</dt><dd><a href="/en-us/docs/CAS-5-3-4-install-and-deploy.html" target="_self">Overview</a></dd><dd><a href="/en-us/docs/CAS-5-3-4-install-and-deploy.html" target="_self">Quick start</a></dd><dd><a href="/en-us/docs/dir/CAS-5-3-4-install-and-deploy.html" target="_self">Developer guide</a></dd></dl></div><div class="col col-6"><dl><dt>Resources</dt><dd><a href="/en-us/blog/index.html" target="_self">Blog</a></dd><dd><a href="/en-us/community/index.html" target="_self">Community</a></dd></dl></div></div><div class="copyright"><span>Copyright © 2018 https://blog.iamzhl.top/</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '';
  </script>
	<script src="/build/blogDetail.js"></script>
</body>
</html>