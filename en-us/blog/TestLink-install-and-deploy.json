{
  "filename": "TestLink-install-and-deploy.md",
  "__html": "<h1><center>TestLink安装部署</center></h1>\n<h2>安装MySQL</h2>\n<p>MySQL的Server在CentOS 7上从默认软件列表中被移除了，用MariaDB来代替，所以这导致我们必须要去官网上进行下载，找到链接，用wget打开，然后再安装：</p>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># wget http://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm</span>\n<span class=\"hljs-comment\"># rpm -ivh mysql57-community-release-el7-9.noarch.rpm</span>\n<span class=\"hljs-comment\"># yum -y install mysql mysql-server mysql-devel</span>\n</code></pre>\n<p>启动MySQL服务</p>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># systemctl start mysqld</span>\n</code></pre>\n<p>获取安装MySQL时的初始密码并登录MySQL</p>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># grep 'temporary password' /var/log/mysqld.log</span>\n<span class=\"hljs-comment\"># mysql -u root -p</span>\n</code></pre>\n<p><img src=\"https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/4a/a001ae2bae5a494c7329cd78a477a3.jpg\" alt=\"\"></p>\n<p>登录成功后修改密码，首先修改安全策略为0，然后将密码长度限制修改为1，最后修改密码</p>\n<pre><code class=\"language-mysql\">mysql&gt; set global validate_password_policy=0;\nmysql&gt; set global validate_password_length=1;\nmysql&gt; set password for root@localhost=password('root');\n</code></pre>\n<p><img src=\"https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/a2/0f74ed53f3a426d1fe005228478d8f.jpg\" alt=\"\"></p>\n<p>创建testlink用户并创建testlink要用的数据库并把testlink数据库的所有权限赋给testlink用户</p>\n<pre><code class=\"language-mysql\">mysql&gt; CREATE USER 'testlink'@'%' IDENTIFIED BY 'root';\nmysql&gt; CREATE DATABASE testlink; \nmysql&gt; GRANT ALL ON testlink.* TO 'testlink'@'%'; \nmysql&gt; flush privileges;\n</code></pre>\n<p>设置MySQL启动与自启动</p>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># systemctl enable mysqld    //自启动</span>\n<span class=\"hljs-comment\"># systemctl start mysqld     //启动</span>\n</code></pre>\n<h2>安装httpd</h2>\n<h3>安装</h3>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># yum -y install httpd</span>\n</code></pre>\n<h3>启动自启动</h3>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># systemctl enable httpd  //自启动</span>\n<span class=\"hljs-comment\"># systemctl start httpd   //启动</span>\n</code></pre>\n<h2>安装PHP</h2>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span>\n<span class=\"hljs-comment\"># rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</span>\n<span class=\"hljs-comment\"># yum -y install `yum search php | grep php56w | grep -v \"===\" | grep -v mysqlnd | awk -F '.' '{print $1}'`</span>\n</code></pre>\n<h3>测试一下PHP环境</h3>\n<p>写一个phpinfo测试php环境是否正常</p>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># vim /var/www/html/info.php</span>\n</code></pre>\n<pre><code class=\"language-php\"><span class=\"hljs-meta\">&lt;?php</span>\n    phpinfo();\n<span class=\"hljs-meta\">?&gt;</span>\n</code></pre>\n<p>浏览器打开<code>http://IP:httpd端口/info.php</code></p>\n<p><img src=\"https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/bf/a51c4fe3482af30d3b54a102c5a844.jpg\" alt=\"\"></p>\n<p>如图，PHP环境安装完成。</p>\n<p>**Note: **\nPHP无法正确解析，网页显示源码的解决方法：</p>\n<pre><code class=\"language-bash\">$ vi /etc/php.ini \n</code></pre>\n<p>将short_open_tag = Off修改为short_open_tag = On，然后重启httpd服务即可</p>\n<h2>安装TestLink</h2>\n<h3>下载</h3>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># wget https://jaist.dl.sourceforge.net/project/testlink/TestLink%201.9/TestLink%201.9.18/testlink-1.9.18.tar.gz</span>\n</code></pre>\n<h3>解压重命名</h3>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># tar zxvf testlink-1.9.18.tar.gz</span>\n<span class=\"hljs-comment\"># mv testlink-1.9.18 testlink</span>\n<span class=\"hljs-comment\"># mv testlink /var/www/html/</span>\n<span class=\"hljs-comment\"># chown -R apache:apache /var/www/html/testlink</span>\n</code></pre>\n<h3>修改配置文件</h3>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># sed -i -e \"s/AllowOverride None/AllowOverride All/g\" /etc/httpd/conf/httpd.conf</span>\n<span class=\"hljs-comment\"># sed -i -e \"s/DirectoryIndex index.html/DirectoryIndex index.html index.php index.shtm/g\" /etc/httpd/conf/httpd.conf</span>\n<span class=\"hljs-comment\"># sed -i -e \"s/session.gc_maxlifetime = 1440/session.gc_maxlifetime = 2400/g\" /etc/php.ini</span>\n<span class=\"hljs-comment\"># sed -i -e \"s/max_execution_time = 30/max_execution_time = 120/g\" /etc/php.ini</span>\n<span class=\"hljs-comment\"># service httpd restart</span>\n</code></pre>\n<p><img src=\"https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/49/3c7f4c9291a6c276e5dad2200d5571.jpg\" alt=\"\"></p>\n<h3>新建一些PHP环境要求必备的文件夹并赋予适当权限</h3>\n<pre><code class=\"language-bash\"><span class=\"hljs-comment\"># mkdir -p /var/www/html/testlink/gui/templates_c</span>\n<span class=\"hljs-comment\"># mkdir -p /var/testlink/logs/</span>\n<span class=\"hljs-comment\"># mkdir -p /var/testlink/upload_area/</span>\n<span class=\"hljs-comment\"># chmod 777 /var/www/html/testlink/gui/templates_c</span>\n<span class=\"hljs-comment\"># chmod 777 /var/testlink/logs/</span>\n<span class=\"hljs-comment\"># chmod 777 /var/testlink/upload_area/</span>\n</code></pre>\n<p><img src=\"https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/23/c132221e0b416226f6f7df1e63b12c.jpg\" alt=\"\"></p>\n<h3>安装</h3>\n<p>浏览器打开<code>http://IP:port/testlink/install</code>(将IP换成自己主机IP，端口号换为自己主机的Apache服务端口号)。如图，点击New installation开始安装</p>\n<p><img src=\"https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/14/da839143e11bec790a2a77f7247529.jpg\" alt=\"\"></p>\n<p>选中同意协议，continue</p>\n<p><img src=\"https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/7c/b33fa4f939e6447fa43f36b5577b43.jpg\" alt=\"\"></p>\n<p>进入系统环境检测阶段，这一步需要根据错误提示进行配置，前面已经在安装php和testlink时解决了，所以现在已经没有错误了，图中橙色的提示可以忽略，点击continue</p>\n<p><img src=\"https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/8c/84dad1406d9a22e95913b060326730.jpg\" alt=\"\"></p>\n<p>如图，设定数据库管理员登录账户密码，自定义TestLink的数据库登录账户密码，其余均保持默认，点击Process TestLink Setup</p>\n<p><img src=\"https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/58/736d782618beafcda69918ffca7749.jpg\" alt=\"\"></p>\n<h2>登录</h2>\n<p>安装完成网址输入http://IP/testlink即可自动跳转到登录页面，默认用户admin/admin</p>\n",
  "link": "/en-us/blog/TestLink-install-and-deploy.html",
  "meta": {
    "title": "TestLink安装部署",
    "date": "2018-08-26 19:51:29",
    "categories": "",
    "- Linux": "",
    "- 运维": "",
    "keywords": "TestLink",
    "description": "TestLink安装部署",
    "tags": "",
    "- TestLink": "",
    "photos": "",
    "- https": "//raw.githubusercontent.com/athlonreg/BlogImages/master/Images/14/da839143e11bec790a2a77f7247529.jpg"
  }
}