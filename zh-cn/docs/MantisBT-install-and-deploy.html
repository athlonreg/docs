<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="MantisBT-install-and-deploy" />
	<meta name="description" content="MantisBT是一个基于PHP技术的轻量级的开源缺陷跟踪系统，以Web操作的形式提供项目管理及缺陷跟踪服务。在功能上、实用性上足以满足中小型项目的管理及跟踪。更重要的是其开源，不需要负担任何费用。本文简介MantisBT的安装部署过程。" />
	<!-- 网页标签标题 -->
	<title>MantisBT安装部署过程</title>
	<link rel="shortcut icon" href="/docs/img/docsite.ico"/>
	<link rel="stylesheet" href="/docs/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/docs/zh-cn/index.html"><img class="logo" src="/docs/img/dubbo_colorful.png"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">En</span><div class="header-menu"><img class="header-menu-toggle" src="/docs/img/system/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="/docs/zh-cn/index.html" target="_self">首页</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/docs/zh-cn/docs/CAS-5-3-4-install-and-deploy.html" target="_self">文档</a></li><li class="menu-item menu-item-normal"><a href="/docs/zh-cn/blog/index.html" target="_self">博客</a></li><li class="menu-item menu-item-normal"><a href="/docs/zh-cn/community/index.html" target="_self">社区</a></li></ul></div></div></header><div class="bar"><div class="bar-body"><img src="/docs/img/system/docs.png" class="front-img"/><span>文档</span><img src="/docs/img/system/docs.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>文档</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/0-1-backpack.html" target="_self">01背包问题</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/Allow-apps-downloaded-from-anywhere-in-macOS.html" target="_self">macOS开启任何来源</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/CAS-5-3-4-install-and-deploy.html" target="_self">CAS 5.3.4 安装部署</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/CentOS-install-openLDAP.html" target="_self">CentOS 安装部署 openLDAP</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/TestLink-integrate-with-ldap-and-CAS.html" target="_self">TestLink 整合 LDAP 和 CAS 单点登录</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/TestLink-install-and-deploy.md.html" target="_self">TestLink 安装部署</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/SonarQube-install-and-deploy.html" target="_self">SonarQube 安装部署</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/SonarQube-integrate-with-ldap-and-CAS.html" target="_self">SonarQube 整合 LDAP 和 CAS 单点登录</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/shadowsocks-libev.html" target="_self">CentOS 搭建 ShadowSocks 访问墙外的世界</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/MantisBT-install-and-deploy.html" target="_self">CentOS 安装部署 MantisBT</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/MantisBT-integrate-with-ldap-and-CAS.html" target="_self">MantisBT 整合 LDAP 和 CAS 单点登录</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/Jenkins-configure-and-deploy.md.html" target="_self">CentOS 安装部署 Jenkins</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/Jenkins-integrate-with-ldap-and-CAS.html" target="_self">Jenkins 整合 LDAP 和 CAS 单点登录</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/Install-macOS-on-laptop.html" target="_self">笔记本安装黑苹果教程</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/Gerrit-install-and-deploy.html" target="_self">CentOS 安装部署 Gerrit</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/Gerrit-integrate-with-ldap-and-CAS.html" target="_self">Gerrit 整合 LDAP 和 CAS 单点登录</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/docs/zh-cn/docs/Custom-terminal-on-your-mac.html" target="_self">iTerm2 + ohmyzsh + powerlevel9k + tmux 打造专属个性化终端</a></li><li style="height:72px;overflow:hidden" class="menu-item menu-item-level-2"><span>目录<img style="transform:rotate(0deg)" class="menu-toggle" src="/docs/img/system/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/docs/zh-cn/docs/dir/demo3.html" target="_self">示例3</a></li></ul></li></ul></li></ul></div><div class="doc-content markdown-body"><h1><strong><center>MantisBT软件安装部署过程</center></strong></h1>
<h1>简介</h1>
<p>    Mantis是一个基于PHP技术的轻量级的开源缺陷跟踪系统，以Web操作的形式提供项目管理及缺陷跟踪服务。在功能上、实用性上足以满足中小型项目的管理及跟踪。更重要的是其开源，不需要负担任何费用。</p>
<h1>部署环境</h1>
<p>Mantis安装部署环境如下：</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>版本号</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Mantisbt</td>
<td>2.16.0</td>
<td>BugTracing 软件</td>
</tr>
<tr>
<td>操作系统</td>
<td>CentOS 7</td>
<td>RedHat 社区发行版</td>
</tr>
<tr>
<td>PHP</td>
<td>7.2.8</td>
<td>PHP 环境</td>
</tr>
</tbody>
</table>
<h1>部署过程</h1>
<h2>软件安装</h2>
<h3>安装PHP</h3>
<pre><code class="language-bash"><span class="hljs-comment"># rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm</span>
<span class="hljs-comment"># rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</span>
<span class="hljs-comment"># yum -y install libicu libicu-devel libicu-doc</span>
<span class="hljs-comment"># yum -y install php70w php70w-gd php70w-xml php70w-mysql php70w-mbstring php70w-ldap php70w-xmlrpc php70w-odbc php70w-pear php70w-soap php70w-snmp</span>
</code></pre>
<h3>安装PHPMailer</h3>
<pre><code>https://github.com/Synchro/PHPMailer/releases/tag/v5.2.13
</code></pre>
<p>下载解压到/var/www/html/mantis/PHPMailer-5.2.13/</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/0b/f7ba2cdc89ecb4edee3d7c32861ad1.jpg" alt=""></p>
<h3>安装apache mysql等必要软件</h3>
<p>MySQL的Server在CentOS 7上从默认软件列表中被移除了，用MariaDB来代替，所以这导致我们必须要去官网上进行下载，找到链接，用wget打开，然后再安装：</p>
<pre><code class="language-bash"><span class="hljs-comment"># wget http://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm</span>
<span class="hljs-comment"># rpm -ivh mysql57-community-release-el7-9.noarch.rpm</span>
<span class="hljs-comment"># yum -y install mysql mysql-server mysql-devel</span>
</code></pre>
<p>启动MySQL服务</p>
<pre><code class="language-bash"><span class="hljs-comment"># systemctl start mysqld</span>
</code></pre>
<p>获取安装MySQL时的初始密码并登录MySQL</p>
<pre><code class="language-bash"><span class="hljs-comment"># grep 'temporary password' /var/log/mysqld.log</span>
<span class="hljs-comment"># mysql -u root -p</span>
</code></pre>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/4a/a001ae2bae5a494c7329cd78a477a3.jpg" alt=""></p>
<p>登录成功后修改密码，首先修改安全策略为0，然后将密码长度限制修改为1，最后修改密码</p>
<pre><code class="language-mysql">mysql&gt; set global validate_password_policy=0;
mysql&gt; set global validate_password_length=1;
mysql&gt; set password for root@localhost=password('root');
</code></pre>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/a2/0f74ed53f3a426d1fe005228478d8f.jpg" alt=""></p>
<p>安装apache httpd</p>
<pre><code class="language-bash"><span class="hljs-comment"># yum -y install httpd</span>
<span class="hljs-comment"># systemctl enable httpd   //自启动</span>
<span class="hljs-comment"># systemctl start httpd    //启动</span>
</code></pre>
<h3>安装mantis</h3>
<h4>下载</h4>
<pre><code class="language-bash"><span class="hljs-comment"># cd /var/www/html</span>
<span class="hljs-comment"># wget https://jaist.dl.sourceforge.net/project/mantisbt/mantis-stable/2.18.0/mantisbt-2.18.0.zip</span>
</code></pre>
<h4>解压重命名</h4>
<pre><code class="language-bash"><span class="hljs-comment"># tar zxvf mantisbt-2.16.0.tar.gz</span>
<span class="hljs-comment"># mv mantisbt-2.16.0 mantis</span>
<span class="hljs-comment"># mv mantis /var/www/html/</span>
</code></pre>
<h4>修改用户组</h4>
<pre><code class="language-bash"><span class="hljs-comment"># chown -R apache:apache /var/www/html/mantis</span>
</code></pre>
<h4>创建数据库</h4>
<pre><code class="language-bash">[root@centos-7 html]<span class="hljs-comment"># mysql -u root -p</span>
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 5.7.23 MySQL Community Server (GPL)

Copyright (c) 2000, 2018, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type <span class="hljs-string">'help;'</span> or <span class="hljs-string">'\h'</span> <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>. Type <span class="hljs-string">'\c'</span> to clear the current input statement.

mysql&gt; create database mantis;
Query OK, 1 row affected (0.00 sec)

mysql&gt; grant all privileges on mantis.* to root@localhost identified by <span class="hljs-string">'123456'</span>;
ERROR 1819 (HY000): Your password does not satisfy the current policy requirements
mysql&gt; <span class="hljs-built_in">set</span> global validate_password_policy=0;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <span class="hljs-built_in">set</span> global validate_password_length=1;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; grant all privileges on mantis.* to root@localhost identified by <span class="hljs-string">'123456'</span>;
Query OK, 0 rows affected, 1 warning (0.01 sec)

mysql&gt; flush privileges;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; <span class="hljs-built_in">exit</span>
Bye
[root@centos-7 html]<span class="hljs-comment">#</span>
</code></pre>
<h4>安装</h4>
<p>打开浏览器在地址栏输入 <a href="http://10.211.55.17:82/mantis">http://10.211.55.17:82/mantis</a>  --  格式为 <code>http://IP:端口/mantis文件夹名称</code>，这时就会自动跳转到php安装向导的页面:</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/13/430b174ae372e2c4854b5804123ab1.jpg" alt=""></p>
<p>    填好主机、密码等信息之后点击 Install/Upgrade Database 安装数据库。</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/86/f2dd1067427ccefb9829d5a3e2903e.jpg" alt=""></p>
<h4>登录</h4>
<p>进入Mantis登录界面，输入用户密码：administrator/root ，登陆即可看到mantis主界面。</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/b1/c3e84af9570ae5c9d61d788d482a69.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/f4/2302c64875ae7556c732820ffe6c2f.jpg" alt=""></p>
<h2>邮件配置</h2>
<p>修改MantisBT/config/config_inc.php文件</p>
<pre><code>$g_enable_email_notification = ON;
$g_administrator_email = 'mailuser';    # 邮箱地址
$g_webmaster_email = 'mailuser';        # 邮箱地址
$g_from_email = 'mailuser';             # 邮箱地址
$g_from_name = 'Mantis Bug Tracker';
$g_phpMailer_method = PHPMAILER_METHOD_SMTP;
$g_smtp_host = 'smtp.163.com';          # SMTP 服务器
$g_smtp_username = 'mailuser';          # 邮箱地址
$g_smtp_password = 'mailpwd';           # 邮箱密码
$g_use_phpMailer = ON; 
$g_return_path_email = 'mailuser';      # 邮箱地址
</code></pre>
<h2>中文配置</h2>
<p>修改/var/www/html/mantis/config_defaults_inc.php文件，在该文件中找到语言设置的地方，修改$g_default_language，将'english'改为'chinese_simplified'。懒得找的话直接复制下面的命令也可以。</p>
<pre><code class="language-bash"><span class="hljs-comment"># sed -i -e "s/$g_default_language = 'auto'/$g_default_language = 'chinese_simplified'/g" /var/www/html/mantis/config_defaults_inc.php</span>
</code></pre>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/17/52f55640c0580b49bb51e81728e32b.jpg" alt=""></p>
<h1>问题解决</h1>
<p>问题描述：配置完成后，无法发送邮件。</p>
<p>解决方法：
邮箱配置问题，添加本地邮箱服务器，设置本地邮箱，对于本地测试邮箱，设置$g_smtp_host=本地IP地址。</p>
<h1>实例运行</h1>
<ul>
<li>为了便于理解，先给出BUG跟踪流程图：</li>
</ul>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/b7/a17671861ee0f1c0ef2d34063c1f7e.png" alt=""></p>
<ul>
<li>Mantis使用流程图：</li>
</ul>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/36/e0cd2969561f3a3847f00064f10d86.jpg" alt=""></p>
<ul>
<li>新用户创建与登录</li>
</ul>
<p>目前本系统的访问地址为：<a href="http://IP">http://IP</a>:port/mantis/login_page.php，用户可以通过首页显示的&quot;注册一个新帐号&quot;进行新用户注册。</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/7d/1aa6506c45bdc101125dbf0eb471cb.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/e0/c44b7bd62656a42effb30cbe072d8d.jpg" alt=""></p>
<p>然后点击邮箱内的激活邮件，进行用户名与密码的设置。也可以通过管理员创建新用户</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/f3/3984a7b93cb83f5018a886334554f3.jpg" alt=""></p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/38/81f16e90a837e3b2e4753481d53d49.jpg" alt=""></p>
<p>管理员可以对用户的角色、所属的项目以及一些其他的情况进行对应的配置。</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/7e/8a3bf7d3b7d54549861c08cc2b8695.jpg" alt=""></p>
<p>各种具体的配置以及各种角色用户的权限可参见管理员的管理视图。</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/64/fb372744682c06a5abf50d6d08e3c3.jpg" alt=""></p>
<p><strong>操作流程</strong>
首先，说明一下系统中的角色和一般所对应的人员：观察者（复查员）、报告者（测试员）、升级者（审核员）、开发人员（开发员）、经理（项目经理）、管理员（系统管理员）。还要简单说明一下问题状态及相关含义（以上的两点只是中文理解和中文翻译的问题，可以在mantisbt-2.15.0/lang/strings_chinese_simplified.txt中修改）：</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/32/a9311c413f72019f384eb9fdb64e91.jpg" alt=""></p>
<ul>
<li>新建：新提交的报告，默认状态为新建</li>
<li>反馈：修正的问题经过测试后仍不完善</li>
<li>认可：报告的问题确实存在</li>
<li>已确认：通常为项目经理确认时使用</li>
<li>已分配：分派给具体开发人员</li>
<li>已解决：修改后的问题，可以进行测试</li>
<li>已关闭：测试通过的问题，或者在报告周期内判定为无需修改的问题。</li>
</ul>
<p>下面介绍一下简单的操作流程，这里以管理员和报告者作为示例，这里为了方便示例，示例中管理员包含了其他角色属性。观察者、升级者以及经理可以根据具体情况进行添加。</p>
<ul>
<li>提交问题</li>
</ul>
<p>**权限：**全部角色
**必填信息：**分类、摘要、描述、查看权限
**选填信息：**出现频率、严重性、优先级、选择平台设置、重现步骤、辅助、标签、上传文件。
**问题单状态：**新建</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/7a/b1f51f397d2700ccd2ae21cc7edbc7.jpg" alt=""></p>
<ul>
<li>审核问题</li>
</ul>
<p>**权限：**审核员、项目经理、（开发员）
**可进行操作：**添加附件、添加注释
**问题单状态：**新建 -&gt; 已审核（认可），审核员对问题进行审核，并确认此问题；新建 -&gt; 已关闭，审核员认为报告的问题不存在或无需修改。</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/cc/cf2fa843e333b7b168418e13720f06.jpg" alt=""></p>
<ul>
<li>确认问题</li>
</ul>
<p>**权限：**项目经理
**问题单状态：**认可 -&gt; 已确认，项目经理确认问题，确认后进入修改流程；认可 -&gt; 反馈，项目经理对问题存在异议，反馈给审核者。</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/61/b450cb7f3eb6af3ce04b1e071dd25e.jpg" alt=""></p>
<ul>
<li>分派问题</li>
</ul>
<p>**权限：**项目经理、开发员
**问题单状态：**已确认 -&gt; 已分派，项目经理分派问题给相应的开发人员；已分派 -&gt; 已分派，开发组长也可以给组员分派问题。
<img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/97/1e02d524da8f78c447a2fae2b0ceb3.jpg" alt=""></p>
<ul>
<li>修复问题</li>
</ul>
<p>**权限：**开发员
**问题单状态：**已分派 -&gt; 已解决，分派给开发员的问题已修复及内部测试，可以提交业务测试时。
<img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/46/f8d53110204d554fe1339fa16d4d98.jpg" alt=""></p>
<ul>
<li>测试问题</li>
</ul>
<p>**权限：**报告者
**问题单状态：**已解决 -&gt; 已关闭，报告者对已解决的问题测试且测试通过；已解决 -&gt; 反馈，报告者对已解决的问题测试，而测试未通过，开发员可对反馈的问题继续修复，再进入后续环节。</p>
<p><img src="https://raw.githubusercontent.com/athlonreg/BlogImages/master/Images/93/d945f5412b7aece0c5595564633ad6.jpg" alt=""></p>
<p>到此，整个流程结束。
<strong>说明：整个流程中，问题处于不同的状态，标记的颜色不同。</strong></p>
</div></section><footer class="footer-container"><div class="footer-body"><img src="/docs/img/dubbo_gray.png"/><div class="cols-container"><div class="col col-12"><h3>免责声明</h3><p>文档所有内容遵循开源协议</p></div><div class="col col-6"><dl><dt>文档</dt><dd><a href="/docs/zh-cn/docs/CAS-5-3-4-install-and-deploy.html" target="_self">概览</a></dd><dd><a href="/docs/zh-cn/docs/CAS-5-3-4-install-and-deploy.html" target="_self">快速开始</a></dd><dd><a href="/docs/zh-cn/docs/CAS-5-3-4-install-and-deploy.html" target="_self">开发者指南</a></dd></dl></div><div class="col col-6"><dl><dt>资源</dt><dd><a href="/docs/zh-cn/blog/index.html" target="_self">博客</a></dd><dd><a href="/docs/zh-cn/community/index.html" target="_self">社区</a></dd></dl></div></div><div class="copyright"><span>Copyright © 2018 https://blog.iamzhl.top/</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '/docs';
  </script>
	<script src="/docs/build/documentation.js"></script>
</body>
</html>